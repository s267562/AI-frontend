<mat-form-field>
    <mat-label>Add student</mat-label>
    <input type="search" matInput placeholder="Name of the student" 
            [matAutocomplete]="auto"
            (keyup)="filter(searchInput.value)" #searchInput/>
    <mat-autocomplete #auto [displayWith]="displayFn"
                    (optionSelected)="updateAddSelection($event)">
        <mat-option *ngFor="let student of _filteredStudents" [value]="student">
            {{ student }}
        </mat-option>
    </mat-autocomplete>
</mat-form-field>
<button mat-button 
        (click)="addStudent(); searchInput.value= ''"
        [disabled]="searchInput.value===''">Add</button>
<br>
<div>

    <button mat-raised-button color="primary" 
            (click)="removeSelectedRows()"
            [disabled]="!areStudentsSelected()">Delete Selected</button>
    <br><br>
    <table #table mat-table matSort [dataSource]="dataSource">

        <!-- Checkbox Column -->
        <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox 
                    (change)="toggleTableMaster($event)" 
                    [checked]="selectionModels[pageIndex] != null && selectionModels[pageIndex].hasValue() && areAllStudentsSelected()"
                    [indeterminate]="selectionModels[pageIndex] != null && selectionModels[pageIndex].hasValue() && !areAllStudentsSelected()"
                    [disabled]="dataSource.data.length===0">
                </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
                <mat-checkbox 
                    (change)="toggleTableRow($event, row)"
                    [checked]="selectionModels[pageIndex] != null && selectionModels[pageIndex].isSelected(row)">
                </mat-checkbox>
            </td>
        </ng-container>
        
        <!-- Id Column -->
        <ng-container matColumnDef="serial">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Student ID </th>
            <td mat-cell *matCellDef="let row"> {{row.serial}} </td>
        </ng-container>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
            <td mat-cell *matCellDef="let row"> {{row.name}} </td>
        </ng-container>

        <!-- firstName Column -->
        <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> First Name </th>
            <td mat-cell *matCellDef="let row"> {{row.firstName}} </td>
        </ng-container>

        <!-- Group Column -->
        <ng-container matColumnDef="group">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Group </th>
            <td mat-cell *matCellDef="let row"> {{ row.group !== undefined ? row.group : "&lt;none&gt;"  }} </td>
        </ng-container>
        
        <tr mat-header-row *matHeaderRowDef="colsToDisplay"></tr>
        <tr mat-row *matRowDef="let row; columns: colsToDisplay"></tr>
        
    </table>
    <mat-paginator [pageSizeOptions]="[5, 10, 20, 50]" 
                (page)="pageEvent($event)"></mat-paginator>
</div>
