<h1 mat-dialog-title>Enroll students</h1>

<mat-dialog-content>

    <div class="upload">
        <!-- upload image -->
        <button mat-flat-button class="file-button" (click)="fileInput.click()">Choose File
            <input #fileInput type="file" style="display:none;" (change)="fileChange($event.target.files)"/> 
        </button>

        <span class="filename" [ngClass]="{'error': fileError}">
            {{filename}}
        </span>
    </div>
    <p *ngIf="formatError" class='format-error'>Invalid file format (CSV containing only the userIds, with the header)</p>

    <p *ngIf="fileStudents.length !== 0">{{enrollableStudents}} students in the CSV file</p>
    <p *ngIf="file !== undefined && !formatError && fileStudents.length === 0">0 enrollable students found in the CSV file</p>
    <mat-list-item *ngFor="let student of fileStudents">
        {{student.id}} - {{student.firstName}} {{student.lastName}}
    </mat-list-item>

</mat-dialog-content>

<br>

<mat-dialog-actions>
    <button mat-button (click)="cancel()" [disabled]="loading">Cancel</button>
    <button mat-raised-button *ngIf="!loading" [disabled]="fileStudents.length === 0" color="primary" (click)="enroll()">Enroll</button>
    <mat-progress-spinner *ngIf="loading" mode="indeterminate" diameter="30" strokeWidth="4" style="margin: 0px 20px;"></mat-progress-spinner>
</mat-dialog-actions>